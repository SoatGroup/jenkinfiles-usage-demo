// WIP
pipeline {

    agent any

    options {
        timestamps()
        disableConcurrentBuilds()
        timeout(time: 1, unit: 'MINUTES')
    }

    stages {
        stage('SIMPLE CONDITION') {
            when {
                anyOf {
                     branch 'master'
                     expression { BRANCH_NAME ==~ /feature\/.*/ }
                }
            }
            steps {
                echo('CONDITION - Executed (Only on master and feature/* branch) !')
                sh('env')
            }
        }
        stage('SEND EMAIL CONDITION') {
            when {
                beforeInput true
                environment name: 'RELEASE_NAME', value: '1.0.0'
            }
            input {
                message "Set the release name"
                ok "Deploy the release"
                parameters {
                    string(name: 'RELEASE_NAME', defaultValue: '0.0.1', description: 'The fake release name for templating')
                    booleanParam(name: 'SEND_EMAIL', defaultValue: true, description: 'Should we send a fake email ?')
                }
            }
            steps {
                echo("Template email with release name ${RELEASE_NAME} - Executed !")
            }
        }
       
        
    }
    
}