// WIP
pipeline {

    agent any

    options {
        timestamps()
        disableConcurrentBuilds()
        timeout(time: 1, unit: 'MINUTES')
    }

    stages {
        stage('SIMPLE CONDITION') {
            when {
                anyOf {
                     branch 'master'
                     expression { BRANCH_NAME ==~ /feature\/.*/ }
                }
               
            }
            steps {
                echo('CONDITION - Executed (Only on master and feature/* branch) !')
                sh('env')
            }
        }
        stage('SEND EMAIL CONDITION') {
            when {
                beforeInput true
                expression { BRANCH_NAME ==~ /feature\/.*/ }
            }
            input {
                message "Send a email ?"
                ok "Deploy the release ${RELEASE_NAME}"
                parameters {
                    string(name: 'RELEASE_NAME', defaultValue: '0.0.1', description: 'The fake release name for templating a fake email')
                }
            }
            steps {
                echo("Template email with release name ${RELEASE_NAME} - Executed !")
            }
        }
       
        
    }
    
}